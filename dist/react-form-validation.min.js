/*!
 * romagny13-react-form-validation v0.4.1
 * (c) 2017 romagny13
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t(e.ReactFormValidation=e.ReactFormValidation||{},e.React)}(this,function(e,t){"use strict";function r(e){return null===e||void 0===e||""===e||"boolean"==typeof e&&!1===e}function n(e,t,r){return e.replace(t,r)}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r={};for(var n in e)e.hasOwnProperty(n)&&-1===t.indexOf(n)&&(r[n]=e[n]);return r}function a(e){var t={},r=!1;return e.forEach(function(e){var n=e.validateOnSubmit();if(n){var o=n.name,a=(n.value,n.hasError),s=n.error;a&&(t[o]=s,r=!0)}}),{hasError:r,errors:t}}function s(e){return Object.keys(e).length>0}function i(e,t,r){return e.length>0&&(!0===r||!0===t)}function u(e,t,r){return e.length>0&&!r&&"touched"===t}function c(e,t,r){for(var n=0;n<t.length;n++){var o=t[n],a=o(e,r);if(a)return{hasError:!0,error:a.error}}return{hasError:!1,error:""}}function l(e,t,r){var n=e.hasError,o=e.error;return t!==n||r!==o}function p(e){return void 0!==e?{hasError:!0,hasSuccess:!1,error:e}:{hasError:!1,hasSuccess:!1,error:""}}function h(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1}function f(e,t,r,n,o,a,s){if(e){var i=r&&""!==r?r+" "+n:n;return a&&(i+=" "+s),i}if(t){var u=r&&""!==r?r+" "+o:o;return a&&(u+=" "+s),u}return r}function d(e){return void 0!==e?e:""}var v="default"in t?t.default:t,y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"required",n="string"==typeof e?e:"This field is required.";return function(e){if(r(e))return{name:t,error:n}}},m=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"minLength",a="number"==typeof e?e:3,s="string"==typeof t?t:n("Please enter at least than {0} characters.","{0}",a);return function(e){if(!r(e)&&e.length<a)return{name:o,error:s}}},g=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"maxLength",a="number"==typeof e?e:30,s="string"==typeof t?t:n("Please enter no more than {0} characters.","{0}",a);return function(e){if(!r(e)&&e.length>a)return{name:o,error:s}}},b=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pattern",o="string"==typeof t?t:"Please fix this field.";return function(t){if(!r(t)&&!e.test(t))return{name:n,error:o}}},P=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"custom",o="string"==typeof t?t:"Please fix this field.";return function(t,a){if(!r(t)&&!e(t,a))return{name:n,error:o}}},C=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},k=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),T=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},E=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},O=function(e){function t(e){C(this,t);var r=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));r._subscribers=[],r._validators=[],r.mode=r.props.mode,r.model=Object.assign({},e.model),r.hasError=!1,r.errors={},r.submitted=!1,r.onSubmit=r.onSubmit.bind(r);var n=o(e,["onSubmit","mode","model"]);return r.config=Object.assign({},n,{onSubmit:r.onSubmit}),r}return T(t,e),k(t,[{key:"getChildContext",value:function(){return{form:this}}},{key:"register",value:function(e){this._validators.push(e)}},{key:"onValidationStateChange",value:function(e){var t=e.name,r=e.hasError,n=e.error;r?this.errors[t]=n:this.errors.hasOwnProperty(t)&&delete this.errors[t],this.hasError=s(this.errors),this.raiseFormStateChange({hasError:this.hasError,errors:this.errors})}},{key:"onFormStateChange",value:function(e){this._subscribers.push(e)}},{key:"raiseFormStateChange",value:function(e){this._subscribers.forEach(function(t){t(e)})}},{key:"onSubmit",value:function(e){e.preventDefault();var t=a(this._validators),r=t.hasError,n=t.errors;this.hasError=r,this.errors=n,this.submitted=!0,this.props.onSubmit({hasError:r,errors:n,model:this.model}),this.raiseFormStateChange({hasError:r,errors:n})}},{key:"render",value:function(){return v.createElement("form",this.config,this.props.children)}}]),t}(t.Component);O.propTypes={mode:t.PropTypes.oneOf(["submit","touched"]),model:t.PropTypes.object,onSubmit:t.PropTypes.func.isRequired,children:t.PropTypes.node},O.defaultProps={mode:"submit",model:{}},O.childContextTypes={form:t.PropTypes.any};var x=function(e){function t(e,r){C(this,t);var n=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.state=p(n.props.errors),void 0!==n.context.form&&(n.context.form.register(n),n.form=n.context.form),n}return T(t,e),k(t,[{key:"getChildContext",value:function(){return{validator:this}}},{key:"componentWillReceiveProps",value:function(e){if(e.error){var t=e.error,r=t&&""!==t,n=!r;if(this.setState({hasError:r,hasSuccess:n,error:t}),this.formElement){var o=this.formElement.getName(),a=this.formElement.getValue();this.notify({name:o,value:a,hasError:r,hasSuccess:n,error:t})}}}},{key:"register",value:function(e){if(this.formElement)throw new Error("A form element is already registered");this.formElement=e}},{key:"onBlur",value:function(e,t){var r=this.form;if(!this.touched&&r){var n=r.model;n.hasOwnProperty(e)&&u(this.props.validators,r.mode,this.touched)&&this.validateOnChange(e,t,n)}}},{key:"onChange",value:function(e,t){var r=this.form;if(r){var n=r.model;n.hasOwnProperty(e)&&(n[e]=t,i(this.props.validators,r.submitted,this.touched)&&this.validateOnChange(e,t,n))}}},{key:"notify",value:function(e){"function"==typeof this.props.onValidationStateChange&&this.props.onValidationStateChange(e),this.form&&this.form.onValidationStateChange(e)}},{key:"validateOnChange",value:function(e,t,r){var n=c(t,this.props.validators,r),o=n.hasError,a=n.error;if(l(this.state,o,a)){var s=!o;this.setState({hasError:o,hasSuccess:s,error:a}),this.touched||(this.touched=!0),this.notify({name:e,value:t,hasError:o,hasSuccess:s,error:a})}}},{key:"validateOnSubmit",value:function(){if(this.formElement){var e=this.formElement.getName(),t=this.formElement.getValue(),r=this.form.model,n=this.props.validators,o=c(t,n,r),a=o.hasError,s=o.error;return this.touched||(this.touched=!0),this.setState({hasError:a,hasSuccess:!a,error:s}),{name:e,value:t,hasError:a,error:s}}}},{key:"render",value:function(){var e=this.props.children;if("function"==typeof e.type){var t=Object.assign({},this.state,e.props),r=new this.props.children.type(t);if("string"==typeof r.type)return v.createElement(r.type,r.props,r.props.children);if(!r.type){var n=r.render();return v.createElement(n.type,n.props,n.props.children)}}else if("string"==typeof e.type)return v.createElement(e.type,e.props,e.props.children);throw new Error("Cannot resolve the component")}}]),t}(t.Component);x.contextTypes={form:t.PropTypes.instanceOf(O)},x.childContextTypes={validator:t.PropTypes.instanceOf(x)},x.propTypes={validators:t.PropTypes.array.isRequired,onValidationStateChange:t.PropTypes.func,error:t.PropTypes.string},x.defaultProps={validators:[]};var S=function(e){function t(e,r){C(this,t);var n=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));n.state={checked:e.checked},void 0!==n.context.validator&&(n.context.validator.register(n),n.validator=n.context.validator),n.onBlur=n.onBlur.bind(n),n.onChange=n.onChange.bind(n);var a=o(n.props,["onChange","onBlur","checked"]);return n.config=Object.assign({},a,{type:"checkbox",onChange:n.onChange,onBlur:n.onBlur}),n}return T(t,e),k(t,[{key:"getName",value:function(){return this.props.name}},{key:"getValue",value:function(){return this.state.checked}},{key:"onChange",value:function(e){var t=e.target.checked;this.setState({checked:t}),this.notify("onChange",t)}},{key:"onBlur",value:function(){this.notify("onBlur",this.state.checked)}},{key:"notify",value:function(e,t){var r=this.props.name;this.validator&&this.validator[e](r,t),this.props[e]&&this.props[e](r,t)}},{key:"render",value:function(){var e=Object.assign({},this.config,{checked:this.state.checked});return v.createElement("input",e)}}]),t}(t.Component);S.propTypes={name:t.PropTypes.string.isRequired,onChange:t.PropTypes.func,onBlur:t.PropTypes.func,checked:t.PropTypes.bool},S.defaultProps={checked:!1},S.contextTypes={validator:t.PropTypes.instanceOf(x)};var _=function(e){function t(e,r){C(this,t);var n=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.state={currents:e.currents},void 0!==n.context.validator&&(n.context.validator.register(n),n.validator=n.context.validator),n.onBlur=n.onBlur.bind(n),n.onChange=n.onChange.bind(n),n.indexOf=n.indexOf.bind(n),n}return T(t,e),k(t,[{key:"getName",value:function(){return this.props.name}},{key:"getValue",value:function(){return this.state.currents}},{key:"indexOf",value:function(e){return h(this.props.currents,e)}},{key:"onChange",value:function(e){var t=e.target.value,r=this.indexOf(t),n=this.state.currents;-1!==r?n.splice(r,1):n.push(t),this.setState({currents:n}),this.notify("onChange",n)}},{key:"onBlur",value:function(){this.notify("onBlur",this.state.currents)}},{key:"notify",value:function(e,t){var r=this.props.name;this.validator&&this.validator[e](r,t),this.props[e]&&this.props[e](r,t)}},{key:"render",value:function(){var e=this;return v.createElement("div",null,this.props.dataSource.map(function(t,r){return v.createElement("div",{key:r},v.createElement("input",{type:"checkbox",name:e.props.name,checked:-1!==e.indexOf(t),value:t,onChange:e.onChange,onBlur:e.onBlur,className:e.props.className}),t)}))}}]),t}(t.Component);_.propTypes={name:t.PropTypes.string.isRequired,className:t.PropTypes.string,onChange:t.PropTypes.func,onBlur:t.PropTypes.func,dataSource:t.PropTypes.array.isRequired,currents:t.PropTypes.array},_.defaultProps={currents:[]},_.contextTypes={validator:t.PropTypes.instanceOf(x)};var B=function(e){var t=e.id,r=e.hasErrorClassName,n=e.hasSuccessClassName,o=e.showHasFeedback,a=e.showHasSuccess,s=e.hasFeedbackClassName,i=e.hasErrorFeedbackClassName,u=e.hasSuccessFeedbackClassName,c=e.className,l=e.children,p=e.hasError,h=e.hasSuccess,d=e.error,y=h&&a,m=f(p,y,c,r,n,o,s);return v.createElement("div",{className:m,id:t},l,o&&p&&v.createElement("span",{className:i,"aria-hidden":"true"}),o&&a&&h&&v.createElement("span",{className:u,"aria-hidden":"true"}),p?v.createElement("span",{className:"help-block"},d):null)};B.propTypes={id:t.PropTypes.string,children:t.PropTypes.node,className:t.PropTypes.string,hasErrorClassName:t.PropTypes.string,hasSuccessClassName:t.PropTypes.string,showHasFeedback:t.PropTypes.bool,showHasSuccess:t.PropTypes.bool,hasFeedbackClassName:t.PropTypes.string,hasErrorFeedbackClassName:t.PropTypes.string,hasSuccessFeedbackClassName:t.PropTypes.string},B.defaultProps={className:"form-group",hasErrorClassName:"has-error",hasSuccessClassName:"has-success",showHasFeedback:!0,showHasSuccess:!0,hasFeedbackClassName:"has-feedback",hasErrorFeedbackClassName:"glyphicon glyphicon-remove form-control-feedback",hasSuccessFeedbackClassName:"glyphicon glyphicon-ok form-control-feedback"};var N=function(e){function t(e,r){C(this,t);var n=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));n.state={value:d(e.value)},void 0!==n.context.validator&&(n.context.validator.register(n),n.validator=n.context.validator),n.onBlur=n.onBlur.bind(n),n.onChange=n.onChange.bind(n);var a=o(n.props,["onChange","onBlur","value"]);return n.config=Object.assign({},a,{onChange:n.onChange,onBlur:n.onBlur}),n}return T(t,e),k(t,[{key:"getName",value:function(){return this.props.name}},{key:"getValue",value:function(){return this.state.value}},{key:"onChange",value:function(e){var t=e.target.value;this.setState({value:t}),this.notify("onChange",t)}},{key:"onBlur",value:function(){this.notify("onBlur",this.state.value)}},{key:"notify",value:function(e,t){var r=this.props.name;this.validator&&this.validator[e](r,t),this.props[e]&&this.props[e](r,t)}},{key:"render",value:function(){var e=Object.assign({},this.config,{value:this.state.value});return v.createElement("input",e)}}]),t}(t.Component);N.propTypes={name:t.PropTypes.string.isRequired,value:t.PropTypes.oneOfType([t.PropTypes.string,t.PropTypes.number,t.PropTypes.bool]),type:t.PropTypes.string},N.defaultProps={type:"text"},N.contextTypes={validator:t.PropTypes.instanceOf(x)};var j=function(e){function t(e,r){C(this,t);var n=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.state={current:e.current},void 0!==n.context.validator&&(n.context.validator.register(n),n.validator=n.context.validator),n.onBlur=n.onBlur.bind(n),n.onChange=n.onChange.bind(n),n}return T(t,e),k(t,[{key:"getName",value:function(){return this.props.name}},{key:"getValue",value:function(){return this.state.current}},{key:"onChange",value:function(e){var t=e.target.value;this.setState({current:t}),this.notify("onChange",t)}},{key:"onBlur",value:function(){this.notify("onBlur",this.state.current)}},{key:"notify",value:function(e,t){var r=this.props.name;this.validator&&this.validator[e](r,t),this.props[e]&&this.props[e](r,t)}},{key:"render",value:function(){var e=this;return v.createElement("div",null,this.props.dataSource.map(function(t,r){return v.createElement("div",{key:r},v.createElement("input",{type:"radio",name:e.props.name,checked:e.state.current===t,value:t,onChange:e.onChange,onBlur:e.onBlur,className:e.props.className}),t)}))}}]),t}(t.Component);j.propTypes={name:t.PropTypes.string.isRequired,className:t.PropTypes.string,onChange:t.PropTypes.func,onBlur:t.PropTypes.func,dataSource:t.PropTypes.array.isRequired,current:t.PropTypes.oneOfType([t.PropTypes.string,t.PropTypes.number,t.PropTypes.bool])},j.contextTypes={validator:t.PropTypes.instanceOf(x)};var w=function(e){function t(e,r){C(this,t);var n=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));n.state={current:e.current},void 0!==n.context.validator&&(n.context.validator.register(n),n.validator=n.context.validator),n.onBlur=n.onBlur.bind(n),n.onChange=n.onChange.bind(n);var a=o(n.props,["onChange","onBlur","current","value","dataSource"]);return n.config=Object.assign({},a,{onChange:n.onChange,onBlur:n.onBlur}),n}return T(t,e),k(t,[{key:"getName",value:function(){return this.props.name}},{key:"getValue",value:function(){return this.state.current}},{key:"onChange",value:function(e){var t=e.target.options[e.target.selectedIndex].value;this.setState({current:t}),this.notify("onChange",t)}},{key:"onBlur",value:function(){this.notify("onBlur",this.state.current)}},{key:"notify",value:function(e,t){var r=this.props.name;this.validator&&this.validator[e](r,t),this.props[e]&&this.props[e](r,t)}},{key:"render",value:function(){var e=this,t=Object.assign({},this.config,{value:this.state.current});return v.createElement("select",t,this.props.dataSource.map(function(t,r){return v.createElement("option",{key:r,value:t,onChange:e.onChange},t)}))}}]),t}(t.Component);w.propTypes={name:t.PropTypes.string.isRequired,onChange:t.PropTypes.func,onBlur:t.PropTypes.func,dataSource:t.PropTypes.array.isRequired,current:t.PropTypes.oneOfType([t.PropTypes.string,t.PropTypes.number,t.PropTypes.bool])},w.contextTypes={validator:t.PropTypes.instanceOf(x)};var F=function(e){function t(e,r){C(this,t);var n=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));n.state={value:e.value},void 0!==n.context.validator&&(n.context.validator.register(n),n.validator=n.context.validator),n.onBlur=n.onBlur.bind(n),n.onChange=n.onChange.bind(n);var a=o(e,["value","onChange","onBlur"]);return n.config=Object.assign({},a,{onChange:n.onChange,onBlur:n.onBlur}),n}return T(t,e),k(t,[{key:"getName",value:function(){return this.props.name}},{key:"getValue",value:function(){return this.state.value}},{key:"onChange",value:function(e){var t=e.target.value;this.setState({value:t}),this.notify("onChange",t)}},{key:"onBlur",value:function(){this.notify("onBlur",this.state.value)}},{key:"notify",value:function(e,t){var r=this.props.name;this.validator&&this.validator[e](r,t),this.props[e]&&this.props[e](r,t)}},{key:"render",value:function(){var e=Object.assign({},this.config,{value:this.state.value});return v.createElement("textarea",e)}}]),t}(t.Component);F.propTypes={name:t.PropTypes.string.isRequired,onChange:t.PropTypes.func,onBlur:t.PropTypes.func,value:t.PropTypes.string},F.defaultProps={value:""},F.contextTypes={validator:t.PropTypes.instanceOf(x)};var R=function(e){function t(e,r){C(this,t);var n=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));n.state={disabled:e.disabled},n.props.shouldDisable&&void 0!==n.context.form&&n.context.form.onFormStateChange(function(e){var t=e.hasError;n.setState({disabled:t})});var a=o(n.props,["shouldDisable","disabled","type"]);return n.config=Object.assign({},a,{type:"submit"}),n}return T(t,e),k(t,[{key:"render",value:function(){var e=Object.assign({},this.config,{disabled:this.state.disabled});return v.createElement("input",e)}}]),t}(t.Component);R.propTypes={shouldDisable:t.PropTypes.bool,disabled:t.PropTypes.bool},R.defaultProps={shouldDisable:!0,disabled:!1},R.contextTypes={form:t.PropTypes.instanceOf(O)},e.required=y,e.minLength=m,e.maxLength=g,e.pattern=b,e.custom=P,e.isRequired=r,e.Checkbox=S,e.CheckboxGroup=_,e.Form=O,e.FormGroup=B,e.Validator=x,e.validateValue=c,e.Input=N,e.RadioGroup=j,e.Select=w,e.TextArea=F,e.Submit=R,Object.defineProperty(e,"__esModule",{value:!0})});