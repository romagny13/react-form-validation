/*!
 * romagny13-react-form-validation v0.4.0
 * (c) 2017 romagny13
 * Released under the MIT License.
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t(e.ReactFormValidation=e.ReactFormValidation||{},e.React)}(this,function(e,t){"use strict";function r(e){return null===e||void 0===e||""===e||"boolean"==typeof e&&!1===e}function n(e,t,r){return e.replace(t,r)}function o(e,t){e&&t&&t.focus()}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r={};for(var n in e)e.hasOwnProperty(n)&&-1===t.indexOf(n)&&(r[n]=e[n]);return r}function a(e){var t={},r=!1;return e.forEach(function(e){var n=e.validateOnSubmit();if(n){var o=n.name,s=(n.value,n.hasError),a=n.error;s&&(t[o]=a,r=!0)}}),{hasError:r,errors:t}}function i(e){return Object.keys(e).length>0}function u(e){return Object.assign({},e)}function p(e,t,r){return e.length>0&&(!0===r||!0===t)}function c(e,t,r){return e.length>0&&!r&&"touched"===t}function l(e,t,r){for(var n=0;n<t.length;n++){var o=t[n],s=o(e,r);if(s)return{hasError:!0,error:s.error}}return{hasError:!1,error:""}}function h(e,t,r){var n=e.hasError,o=e.error;return t!==n||r!==o}function f(e){return void 0!==e?{hasError:!0,hasSuccess:!1,error:e}:{hasError:!1,hasSuccess:!1,error:""}}function d(e,t){for(var r=0;r<e.length;r++)if(e[r]===t)return r;return-1}function y(e,t,r,n,o,s,a){if(e){var i=r&&""!==r?r+" "+n:n;return s&&(i+=" "+a),i}if(t){var u=r&&""!==r?r+" "+o:o;return s&&(u+=" "+a),u}return r}function v(e){return void 0!==e?e:""}var m="default"in t?t.default:t,g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"required",n="string"==typeof e?e:"This field is required.";return function(e){if(r(e))return{name:t,error:n}}},b=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"minLength",s="number"==typeof e?e:3,a="string"==typeof t?t:n("Please enter at least than {0} characters.","{0}",s);return function(e){if(!r(e)&&e.length<s)return{name:o,error:a}}},P=function(e,t){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"maxLength",s="number"==typeof e?e:30,a="string"==typeof t?t:n("Please enter no more than {0} characters.","{0}",s);return function(e){if(!r(e)&&e.length>s)return{name:o,error:a}}},T=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pattern",o="string"==typeof t?t:"Please fix this field.";return function(t){if(!r(t)&&!e.test(t))return{name:n,error:o}}},k=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"custom",o="string"==typeof t?t:"Please fix this field.";return function(t,s){if(!r(t)&&!e(t,s))return{name:n,error:o}}},C=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},E=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},S=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},_=function(e){function t(e){C(this,t);var r=S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._subscribers=[],r._validators=[],r.mode=r.props.mode,r.model=u(e.model),r.hasError=!1,r.errors={},r.submitted=!1,r.onSubmit=r.onSubmit.bind(r),r}return x(t,e),E(t,[{key:"getChildContext",value:function(){return{form:this}}},{key:"register",value:function(e){this._validators.push(e)}},{key:"onValidationStateChange",value:function(e){var t=e.name,r=e.hasError,n=e.error;r?this.errors[t]=n:this.errors.hasOwnProperty(t)&&delete this.errors[t],this.hasError=i(this.errors),this.raiseFormStateChange({hasError:this.hasError,errors:this.errors})}},{key:"onFormStateChange",value:function(e){this._subscribers.push(e)}},{key:"raiseFormStateChange",value:function(e){this._subscribers.forEach(function(t){t(e)})}},{key:"onSubmit",value:function(e){e.preventDefault();var t=a(this._validators),r=t.hasError,n=t.errors;this.hasError=r,this.errors=n,this.submitted=!0,this.props.onSubmit({hasError:r,errors:n,model:this.model}),this.raiseFormStateChange({hasError:r,errors:n})}},{key:"render",value:function(){var e=s(this.props,["onSubmit","mode","model"]);return m.createElement("form",O({onSubmit:this.onSubmit},e),this.props.children)}}]),t}(t.Component);_.propTypes={mode:t.PropTypes.oneOf(["submit","touched"]),model:t.PropTypes.object,onSubmit:t.PropTypes.func.isRequired,children:t.PropTypes.node},_.defaultProps={mode:"submit",model:{}},_.childContextTypes={form:t.PropTypes.any};var N=function(e){function t(e,r){C(this,t);var n=S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.state=f(n.props.errors),void 0!==n.context.form&&(n.context.form.register(n),n.form=n.context.form),n}return x(t,e),E(t,[{key:"getChildContext",value:function(){return{validator:this}}},{key:"componentWillReceiveProps",value:function(e){if(e.error){var t=e.error,r=t&&""!==t,n=!r;if(this.setState({hasError:r,hasSuccess:n,error:t}),this.formElement){var o=this.formElement.getName(),s=this.formElement.getValue();this.notify({name:o,value:s,hasError:r,hasSuccess:n,error:t})}}}},{key:"register",value:function(e){if(this.formElement)throw new Error("A form element is already registered");this.formElement=e}},{key:"onBlur",value:function(e,t){var r=this.form;if(!this.touched&&r){var n=r.model;n.hasOwnProperty(e)&&c(this.props.validators,r.mode,this.touched)&&this.validateOnChange(e,t,n)}}},{key:"onChange",value:function(e,t){var r=this.form;if(r){var n=r.model;n.hasOwnProperty(e)&&(n[e]=t,p(this.props.validators,r.submitted,this.touched)&&this.validateOnChange(e,t,n))}}},{key:"notify",value:function(e){"function"==typeof this.props.onValidationStateChange&&this.props.onValidationStateChange(e),this.form&&this.form.onValidationStateChange(e)}},{key:"validateOnChange",value:function(e,t,r){var n=l(t,this.props.validators,r),o=n.hasError,s=n.error;if(h(this.state,o,s)){var a=!o;this.setState({hasError:o,hasSuccess:a,error:s}),this.touched||(this.touched=!0),this.notify({name:e,value:t,hasError:o,hasSuccess:a,error:s})}}},{key:"validateOnSubmit",value:function(){if(this.formElement){var e=this.formElement.getName(),t=this.formElement.getValue(),r=this.form.model,n=this.props.validators,o=l(t,n,r),s=o.hasError,a=o.error;return this.touched||(this.touched=!0),this.setState({hasError:s,hasSuccess:!s,error:a}),{name:e,value:t,hasError:s,error:a}}}},{key:"render",value:function(){var e=this.props.children;if("function"==typeof e.type){var t=Object.assign({},this.state,e.props),r=new this.props.children.type(t);return m.createElement(r.type,r.props,r.props.children)}return m.createElement(e.type,e.props,e.props.children)}}]),t}(t.Component);N.contextTypes={form:t.PropTypes.instanceOf(_)},N.childContextTypes={validator:t.PropTypes.instanceOf(N)},N.propTypes={validators:t.PropTypes.array.isRequired,onValidationStateChange:t.PropTypes.func,error:t.PropTypes.string},N.defaultProps={validators:[]};var B=function(e){function t(e,r){C(this,t);var n=S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.state={checked:e.checked},void 0!==n.context.validator&&(n.context.validator.register(n),n.validator=n.context.validator),n.onBlur=n.onBlur.bind(n),n.onChange=n.onChange.bind(n),n}return x(t,e),E(t,[{key:"componentDidMount",value:function(){o(this.props.focus,this.refs[this.props.name])}},{key:"getName",value:function(){return this.props.name}},{key:"getValue",value:function(){return this.state.checked}},{key:"onChange",value:function(e){var t=e.target.checked;this.setState({checked:t}),this.notify("onChange",t)}},{key:"onBlur",value:function(){this.notify("onBlur",this.state.checked)}},{key:"notify",value:function(e,t){var r=this.props.name;this.validator&&this.validator[e](r,t),this.props[e]&&this.props[e](r,t)}},{key:"render",value:function(){return m.createElement("input",{ref:this.props.name,type:"checkbox",id:this.props.id,name:this.props.name,checked:this.state.checked,onChange:this.onChange,onBlur:this.onBlur,className:this.props.className})}}]),t}(t.Component);B.propTypes={id:t.PropTypes.string,name:t.PropTypes.string.isRequired,className:t.PropTypes.string,onChange:t.PropTypes.func,onBlur:t.PropTypes.func,checked:t.PropTypes.bool,focus:t.PropTypes.bool},B.defaultProps={checked:!1},B.contextTypes={validator:t.PropTypes.instanceOf(N)};var j=function(e){function t(e,r){C(this,t);var n=S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.state={currents:e.currents},void 0!==n.context.validator&&(n.context.validator.register(n),n.validator=n.context.validator),n.onBlur=n.onBlur.bind(n),n.onChange=n.onChange.bind(n),n.indexOf=n.indexOf.bind(n),n}return x(t,e),E(t,[{key:"getName",value:function(){return this.props.name}},{key:"getValue",value:function(){return this.state.currents}},{key:"indexOf",value:function(e){return d(this.props.currents,e)}},{key:"onChange",value:function(e){var t=e.target.value,r=this.indexOf(t),n=this.state.currents;-1!==r?n.splice(r,1):n.push(t),this.setState({currents:n}),this.notify("onChange",n)}},{key:"onBlur",value:function(){this.notify("onBlur",this.state.currents)}},{key:"notify",value:function(e,t){var r=this.props.name;this.validator&&this.validator[e](r,t),this.props[e]&&this.props[e](r,t)}},{key:"render",value:function(){var e=this;return m.createElement("div",null,this.props.dataSource.map(function(t,r){return m.createElement("div",{key:r},m.createElement("input",{type:"checkbox",name:e.props.name,checked:-1!==e.indexOf(t),value:t,onChange:e.onChange,onBlur:e.onBlur,className:e.props.className}),t)}))}}]),t}(t.Component);j.propTypes={name:t.PropTypes.string.isRequired,className:t.PropTypes.string,onChange:t.PropTypes.func,onBlur:t.PropTypes.func,dataSource:t.PropTypes.array.isRequired,currents:t.PropTypes.array},j.defaultProps={currents:[]},j.contextTypes={validator:t.PropTypes.instanceOf(N)};var w=function(e){var t=e.id,r=e.hasErrorClassName,n=e.hasSuccessClassName,o=e.showHasFeedback,s=e.showHasSuccess,a=e.hasFeedbackClassName,i=e.hasErrorFeedbackClassName,u=e.hasSuccessFeedbackClassName,p=e.className,c=e.children,l=e.hasError,h=e.hasSuccess,f=e.error,d=h&&s,v=y(l,d,p,r,n,o,a);return m.createElement("div",{className:v,id:t},c,o&&l&&m.createElement("span",{className:i,"aria-hidden":"true"}),o&&s&&h&&m.createElement("span",{className:u,"aria-hidden":"true"}),l?m.createElement("span",{className:"help-block"},f):null)};w.propTypes={id:t.PropTypes.string,children:t.PropTypes.node,className:t.PropTypes.string,hasErrorClassName:t.PropTypes.string,hasSuccessClassName:t.PropTypes.string,showHasFeedback:t.PropTypes.bool,showHasSuccess:t.PropTypes.bool,hasFeedbackClassName:t.PropTypes.string,hasErrorFeedbackClassName:t.PropTypes.string,hasSuccessFeedbackClassName:t.PropTypes.string},w.defaultProps={className:"form-group",hasErrorClassName:"has-error",hasSuccessClassName:"has-success",showHasFeedback:!0,showHasSuccess:!0,hasFeedbackClassName:"has-feedback",hasErrorFeedbackClassName:"glyphicon glyphicon-remove form-control-feedback",hasSuccessFeedbackClassName:"glyphicon glyphicon-ok form-control-feedback"};var F=function(e){function t(e,r){C(this,t);var n=S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r)),o=v(e.value);return n.state={value:o},void 0!==n.context.validator&&(n.context.validator.register(n),n.validator=n.context.validator),n.onBlur=n.onBlur.bind(n),n.onChange=n.onChange.bind(n),n}return x(t,e),E(t,[{key:"componentDidMount",value:function(){o(this.props.focus,this.refs[this.props.name])}},{key:"getName",value:function(){return this.props.name}},{key:"getValue",value:function(){return this.state.value}},{key:"onChange",value:function(e){var t=e.target.value;this.setState({value:t}),this.notify("onChange",t)}},{key:"onBlur",value:function(){this.notify("onBlur",this.state.value)}},{key:"notify",value:function(e,t){var r=this.props.name;this.validator&&this.validator[e](r,t),this.props[e]&&this.props[e](r,t)}},{key:"render",value:function(){return m.createElement("input",{ref:this.props.name,type:this.props.type,id:this.props.id,name:this.props.name,value:this.state.value,onChange:this.onChange,onBlur:this.onBlur,className:this.props.className,placeholder:this.props.placeholder})}}]),t}(t.Component);F.propTypes={focus:t.PropTypes.bool,value:t.PropTypes.oneOfType([t.PropTypes.string,t.PropTypes.number,t.PropTypes.bool]),name:t.PropTypes.string.isRequired,id:t.PropTypes.string,className:t.PropTypes.string,onBlur:t.PropTypes.func,onChange:t.PropTypes.func,type:t.PropTypes.string,placeholder:t.PropTypes.string},F.defaultProps={type:"text"},F.contextTypes={validator:t.PropTypes.instanceOf(N)};var R=function(e){function t(e,r){C(this,t);var n=S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.state={current:e.current},void 0!==n.context.validator&&(n.context.validator.register(n),n.validator=n.context.validator),n.onBlur=n.onBlur.bind(n),n.onChange=n.onChange.bind(n),n}return x(t,e),E(t,[{key:"getName",value:function(){return this.props.name}},{key:"getValue",value:function(){return this.state.current}},{key:"onChange",value:function(e){var t=e.target.value;this.setState({current:t}),this.notify("onChange",t)}},{key:"onBlur",value:function(){this.notify("onBlur",this.state.current)}},{key:"notify",value:function(e,t){var r=this.props.name;this.validator&&this.validator[e](r,t),this.props[e]&&this.props[e](r,t)}},{key:"render",value:function(){var e=this;return m.createElement("div",null,this.props.dataSource.map(function(t,r){return m.createElement("div",{key:r},m.createElement("input",{type:"radio",name:e.props.name,checked:e.state.current===t,value:t,onChange:e.onChange,onBlur:e.onBlur,className:e.props.className}),t)}))}}]),t}(t.Component);R.propTypes={name:t.PropTypes.string.isRequired,className:t.PropTypes.string,onChange:t.PropTypes.func,onBlur:t.PropTypes.func,dataSource:t.PropTypes.array.isRequired,current:t.PropTypes.oneOfType([t.PropTypes.string,t.PropTypes.number,t.PropTypes.bool])},R.contextTypes={validator:t.PropTypes.instanceOf(N)};var V=function(e){function t(e,r){C(this,t);var n=S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.state={current:e.current},void 0!==n.context.validator&&(n.context.validator.register(n),n.validator=n.context.validator),n.onBlur=n.onBlur.bind(n),n.onChange=n.onChange.bind(n),n}return x(t,e),E(t,[{key:"componentDidMount",value:function(){o(this.props.focus,this.refs[this.props.name])}},{key:"getName",value:function(){return this.props.name}},{key:"getValue",value:function(){return this.state.current}},{key:"onChange",value:function(e){var t=e.target.options[e.target.selectedIndex].value;this.setState({current:t}),this.notify("onChange",t)}},{key:"onBlur",value:function(){this.notify("onBlur",this.state.current)}},{key:"notify",value:function(e,t){var r=this.props.name;this.validator&&this.validator[e](r,t),this.props[e]&&this.props[e](r,t)}},{key:"render",value:function(){var e=this;return m.createElement("select",{ref:this.props.name,id:this.props.id,name:this.props.name,value:this.state.current,onChange:this.onChange,onBlur:this.onBlur,className:this.props.className},this.props.dataSource.map(function(t,r){return m.createElement("option",{key:r,value:t,onChange:e.onChange},t)}))}}]),t}(t.Component);V.propTypes={id:t.PropTypes.string,name:t.PropTypes.string.isRequired,className:t.PropTypes.string,onChange:t.PropTypes.func,onBlur:t.PropTypes.func,dataSource:t.PropTypes.array.isRequired,current:t.PropTypes.oneOfType([t.PropTypes.string,t.PropTypes.number,t.PropTypes.bool]),focus:t.PropTypes.bool},V.contextTypes={validator:t.PropTypes.instanceOf(N)};var q=function(e){function t(e,r){C(this,t);var n=S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.state={value:e.value},void 0!==n.context.validator&&(n.context.validator.register(n),n.validator=n.context.validator),n.onBlur=n.onBlur.bind(n),n.onChange=n.onChange.bind(n),n}return x(t,e),E(t,[{key:"componentDidMount",value:function(){o(this.props.focus,this.refs[this.props.name])}},{key:"getName",value:function(){return this.props.name}},{key:"getValue",value:function(){return this.state.value}},{key:"onChange",value:function(e){var t=e.target.value;this.setState({value:t}),this.notify("onChange",t)}},{key:"onBlur",value:function(){this.notify("onBlur",this.state.value)}},{key:"notify",value:function(e,t){var r=this.props.name;this.validator&&this.validator[e](r,t),this.props[e]&&this.props[e](r,t)}},{key:"render",value:function(){var e=s(this.props,["value","onChange","onBlur","focus"]);return m.createElement("textarea",O({ref:this.props.name,value:this.state.value,onChange:this.onChange,onBlur:this.onBlur},e))}}]),t}(t.Component);q.propTypes={name:t.PropTypes.string.isRequired,onChange:t.PropTypes.func,onBlur:t.PropTypes.func,value:t.PropTypes.string,focus:t.PropTypes.bool},q.defaultProps={value:""},q.contextTypes={validator:t.PropTypes.instanceOf(N)};var D=function(e){function t(e,r){C(this,t);var n=S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.state={disabled:e.disabled},n.props.shouldDisable&&void 0!==n.context.form&&n.context.form.onFormStateChange(function(e){var t=e.hasError;n.setState({disabled:t})}),n}return x(t,e),E(t,[{key:"render",value:function(){var e=s(this.props,["shouldDisable","disabled","type"]);return m.createElement("input",O({type:"submit",disabled:this.state.disabled},e))}}]),t}(t.Component);D.propTypes={shouldDisable:t.PropTypes.bool,disabled:t.PropTypes.bool},D.defaultProps={shouldDisable:!0,disabled:!1},D.contextTypes={form:t.PropTypes.instanceOf(_)},e.required=g,e.minLength=b,e.maxLength=P,e.pattern=T,e.custom=k,e.isRequired=r,e.Checkbox=B,e.CheckboxGroup=j,e.Form=_,e.FormGroup=w,e.Validator=N,e.validateValue=l,e.Input=F,e.RadioGroup=R,e.Select=V,e.TextArea=q,e.Submit=D,Object.defineProperty(e,"__esModule",{value:!0})});