/*!
 * romagny13-react-form-validation v0.4.2
 * (c) 2017 romagny13
 * Released under the MIT License.
 */
!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],r):r(e.ReactFormValidation=e.ReactFormValidation||{},e.React)}(this,function(e,r){"use strict";function t(e){return null===e||void 0===e||""===e||"boolean"==typeof e&&!1===e}function n(e,r,t){return e.replace(r,t)}function o(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t={};for(var n in e)e.hasOwnProperty(n)&&-1===r.indexOf(n)&&(t[n]=e[n]);return t}function a(e,r,t,n){var a=o(e,r);return Object.assign({},a,{onChange:t,onBlur:n})}function s(e,r){for(var t=0;t<e.length;t++)if(e[t]===r)return t;return-1}function i(e){var r={},t=!1;return e.forEach(function(e){var n=e.validateOnSubmit();if(n){var o=n.name,a=(n.value,n.hasError),s=n.error;a&&(r[o]=s,t=!0)}}),{hasError:t,errors:r}}function u(e){return Object.keys(e).length>0}function c(e,r,t){return e.length>0&&(!0===t||!0===r)}function l(e,r,t){return e.length>0&&!t&&"touched"===r}function h(e,r,t){for(var n=0;n<r.length;n++){var o=r[n],a=o(e,t);if(a)return{hasError:!0,error:a.error}}return{hasError:!1,error:""}}function p(e,r,t){var n=e.hasError,o=e.error;return r!==n||t!==o}function f(e){return void 0!==e?{hasError:!0,hasSuccess:!1,error:e}:{hasError:!1,hasSuccess:!1,error:""}}function d(e,r,t){if(e){var n=e.model;if(n.hasOwnProperty(r))return n[r]=t,!0}return!1}function y(e,r,t,n,o,a,s){if(e){var i=t&&""!==t?t+" "+n:n;return a&&(i+=" "+s),i}if(r){var u=t&&""!==t?t+" "+o:o;return a&&(u+=" "+s),u}return t}var v="default"in r?r.default:r,m=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"required",n="string"==typeof e?e:"This field is required.";return function(e){if(t(e))return{name:r,error:n}}},g=function(e,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"minLength",a="number"==typeof e?e:3,s="string"==typeof r?r:n("Please enter at least than {0} characters.","{0}",a);return function(e){if(!t(e)&&e.length<a)return{name:o,error:s}}},b=function(e,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"maxLength",a="number"==typeof e?e:30,s="string"==typeof r?r:n("Please enter no more than {0} characters.","{0}",a);return function(e){if(!t(e)&&e.length>a)return{name:o,error:s}}},k=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pattern",o="string"==typeof r?r:"Please fix this field.";return function(r){if(!t(r)&&!e.test(r))return{name:n,error:o}}},P=function(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"custom",o="string"==typeof r?r:"Please fix this field.";return function(r,a){if(!t(r)&&!e(r,a))return{name:n,error:o}}},C=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},T=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),E=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},S=function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)},O=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r},_=function(e,r){return v.createElement("form",e,r)},B=function(e,r){if("function"==typeof e.type){var t=Object.assign({},r,e.props),n=new e.type(t);if("string"==typeof n.type)return v.createElement(n.type,n.props,n.props.children);if(!n.type){var o=n.render();return v.createElement(o.type,o.props,o.props.children)}}else if("string"==typeof e.type)return v.createElement(e.type,e.props,e.props.children);throw new Error("Cannot resolve the component")},j=function(e){return v.createElement("input",e)},x=function(e){return v.createElement("input",E({type:"checkbox"},e))},F=function(e,r,t,n,o){return v.createElement("div",null,r.map(function(r,a){return v.createElement("div",{key:a},v.createElement("input",E({type:"checkbox",checked:-1!==t(r),value:r,onChange:n,onBlur:o},e)),r)}))},w=function(e,r,t,n,o){return v.createElement("div",null,r.map(function(r,a){return v.createElement("div",{key:a},v.createElement("input",E({type:"radio",value:r,checked:t===r,onChange:n,onBlur:o},e)),r)}))},N=function(e,r,t){return v.createElement("select",e,r.map(function(e,r){return v.createElement("option",{key:r,value:e,onChange:t},e)}))},R=function(e){return v.createElement("textarea",e)},q=function(e,r){return v.createElement("input",E({type:"submit",disabled:r},e))},V=function(e){function r(e){C(this,r);var t=O(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));t._subscribers=[],t._validators=[],t.mode=t.props.mode,t.model=Object.assign({},e.model),t.hasError=!1,t.errors={},t.submitted=!1,t.onSubmit=t.onSubmit.bind(t);var n=o(e,["onSubmit","mode","model"]);return t.config=Object.assign({},n,{onSubmit:t.onSubmit}),t}return S(r,e),T(r,[{key:"getChildContext",value:function(){return{form:this}}},{key:"register",value:function(e){this._validators.push(e)}},{key:"onValidationStateChange",value:function(e){var r=e.name,t=e.hasError,n=e.error;t?this.errors[r]=n:this.errors.hasOwnProperty(r)&&delete this.errors[r],this.hasError=u(this.errors),this.raiseFormStateChange({hasError:this.hasError,errors:this.errors})}},{key:"onFormStateChange",value:function(e){this._subscribers.push(e)}},{key:"raiseFormStateChange",value:function(e){this._subscribers.forEach(function(r){r(e)})}},{key:"onSubmit",value:function(e){e.preventDefault();var r=i(this._validators),t=r.hasError,n=r.errors;this.hasError=t,this.errors=n,this.submitted=!0,this.props.onSubmit({hasError:t,errors:n,model:this.model}),this.raiseFormStateChange({hasError:t,errors:n})}},{key:"render",value:function(){return _(this.config,this.props.children)}}]),r}(r.Component);V.propTypes={mode:r.PropTypes.oneOf(["submit","touched"]),model:r.PropTypes.object.isRequired,onSubmit:r.PropTypes.func.isRequired,children:r.PropTypes.node},V.defaultProps={mode:"submit",model:{}},V.childContextTypes={form:r.PropTypes.any};var M=function(e){function r(e,t){C(this,r);var n=O(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return n.state=f(n.props.errors),void 0!==n.context.form&&(n.context.form.register(n),n.form=n.context.form),n}return S(r,e),T(r,[{key:"getChildContext",value:function(){return{validator:this}}},{key:"componentWillReceiveProps",value:function(e){if(e.error){var r=e.error,t=r&&""!==r,n=!t;if(this.setState({hasError:t,hasSuccess:n,error:r}),this.formElement){var o=this.formElement.name,a=this.formElement.getValue();this.notify({name:o,value:a,hasError:t,hasSuccess:n,error:r})}}}},{key:"register",value:function(e){if(this.formElement)throw new Error("A form element is already registered");this.formElement=e}},{key:"onBlur",value:function(e,r){var t=this.form;if(!this.touched&&t){var n=t.model;n.hasOwnProperty(e)&&l(this.props.validators,t.mode,this.touched)&&this.validateOnChange(e,r,n)}}},{key:"onChange",value:function(e,r){var t=this.form;if(t){var n=t.model;n.hasOwnProperty(e)&&c(this.props.validators,t.submitted,this.touched)&&this.validateOnChange(e,r,n)}}},{key:"notify",value:function(e){"function"==typeof this.props.onValidationStateChange&&this.props.onValidationStateChange(e),this.form&&this.form.onValidationStateChange(e)}},{key:"validateOnChange",value:function(e,r,t){var n=h(r,this.props.validators,t),o=n.hasError,a=n.error;if(p(this.state,o,a)){var s=!o;this.setState({hasError:o,hasSuccess:s,error:a}),this.touched||(this.touched=!0),this.notify({name:e,value:r,hasError:o,hasSuccess:s,error:a})}}},{key:"validateOnSubmit",value:function(){if(this.formElement){var e=this.formElement.name,r=this.formElement.getValue(),t=this.form.model,n=this.props.validators,o=h(r,n,t),a=o.hasError,s=o.error;return this.touched||(this.touched=!0),this.setState({hasError:a,hasSuccess:!a,error:s}),{name:e,value:r,hasError:a,error:s}}}},{key:"render",value:function(){return B(this.props.children,this.state)}}]),r}(r.Component);M.contextTypes={form:r.PropTypes.instanceOf(V)},M.childContextTypes={validator:r.PropTypes.instanceOf(M)},M.propTypes={validators:r.PropTypes.array.isRequired,onValidationStateChange:r.PropTypes.func,error:r.PropTypes.string},M.defaultProps={validators:[]};var A=function(e){function r(e,t){C(this,r);var n=O(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return void 0!==t.validator&&(t.validator.register(n),n.validator=t.validator),n.name=n.props.name,n.form=t.form,n.onBlur=n.onBlur.bind(n),n.onChange=n.onChange.bind(n),n}return S(r,e),T(r,[{key:"tryUpdateFormModel",value:function(e){d(this.form,this.name,e)}},{key:"notify",value:function(e,r){var t=this.props.name;this.validator&&this.validator[e](t,r),this.props[e]&&this.props[e](t,r)}}]),r}(r.Component);A.contextTypes={validator:r.PropTypes.instanceOf(M),form:r.PropTypes.instanceOf(V)};var I=function(e){function r(e,t){C(this,r);var n=O(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return n.state={checked:e.checked},n.config=a(e,["onChange","onBlur","checked"],n.onChange,n.onBlur),n}return S(r,e),T(r,[{key:"getValue",value:function(){return this.state.checked}},{key:"onChange",value:function(e){var r=e.target.checked;this.setState({checked:r}),this.tryUpdateFormModel(r),this.notify("onChange",r)}},{key:"onBlur",value:function(){this.notify("onBlur",this.state.checked)}},{key:"render",value:function(){var e=Object.assign({},this.config,{checked:this.state.checked});return x(e)}}]),r}(A);I.propTypes={name:r.PropTypes.string.isRequired,checked:r.PropTypes.bool},I.defaultProps={checked:!1};var U=function(e){function r(e,t){C(this,r);var n=O(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return n.state={currents:e.currents},n.config=a(e,["onChange","onBlur","dataSource","currents"],n.onChange,n.onBlur),n.isInCurrentArray=n.isInCurrentArray.bind(n),n.dataSource=n.props.dataSource,n}return S(r,e),T(r,[{key:"getValue",value:function(){return this.state.currents}},{key:"isInCurrentArray",value:function(e){return s(this.props.currents,e)}},{key:"onChange",value:function(e){var r=e.target.value,t=this.isInCurrentArray(r),n=this.state.currents;-1!==t?n.splice(t,1):n.push(r),this.setState({currents:n}),this.tryUpdateFormModel(n),this.notify("onChange",n)}},{key:"onBlur",value:function(){this.notify("onBlur",this.state.currents)}},{key:"render",value:function(){return F(this.config,this.dataSource,this.isInCurrentArray,this.onChange,this.onBlur)}}]),r}(A);U.propTypes={name:r.PropTypes.string.isRequired,dataSource:r.PropTypes.array.isRequired,currents:r.PropTypes.array},U.defaultProps={currents:[]};var H=function(e){var r=e.id,t=e.hasErrorClassName,n=e.hasSuccessClassName,o=e.showHasFeedback,a=e.showHasSuccess,s=e.hasFeedbackClassName,i=e.hasErrorFeedbackClassName,u=e.hasSuccessFeedbackClassName,c=e.className,l=e.children,h=e.hasError,p=e.hasSuccess,f=e.error,d=p&&a,m=y(h,d,c,t,n,o,s);return v.createElement("div",{className:m,id:r},l,o&&h&&v.createElement("span",{className:i,"aria-hidden":"true"}),o&&a&&p&&v.createElement("span",{className:u,"aria-hidden":"true"}),h?v.createElement("span",{className:"help-block"},f):null)};H.propTypes={id:r.PropTypes.string,children:r.PropTypes.node,className:r.PropTypes.string,hasErrorClassName:r.PropTypes.string,hasSuccessClassName:r.PropTypes.string,showHasFeedback:r.PropTypes.bool,showHasSuccess:r.PropTypes.bool,hasFeedbackClassName:r.PropTypes.string,hasErrorFeedbackClassName:r.PropTypes.string,hasSuccessFeedbackClassName:r.PropTypes.string},H.defaultProps={className:"form-group",hasErrorClassName:"has-error",hasSuccessClassName:"has-success",showHasFeedback:!0,showHasSuccess:!0,hasFeedbackClassName:"has-feedback",hasErrorFeedbackClassName:"glyphicon glyphicon-remove form-control-feedback",hasSuccessFeedbackClassName:"glyphicon glyphicon-ok form-control-feedback"};var D=function(e){function r(e,t){C(this,r);var n=O(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return n.state={value:e.value},n.config=a(e,["onChange","onBlur","value"],n.onChange,n.onBlur),n}return S(r,e),T(r,[{key:"getValue",value:function(){return this.state.value}},{key:"onChange",value:function(e){var r=e.target.value;this.setState({value:r}),this.tryUpdateFormModel(r),this.notify("onChange",r)}},{key:"onBlur",value:function(){this.notify("onBlur",this.state.value)}},{key:"render",value:function(){var e=Object.assign({},this.config,{value:this.state.value});return j(e)}}]),r}(A);D.propTypes={name:r.PropTypes.string.isRequired,value:r.PropTypes.oneOfType([r.PropTypes.string,r.PropTypes.number,r.PropTypes.bool]),type:r.PropTypes.oneOf(["text","email","password","search","number","range","file","tel","url"])},D.defaultProps={type:"text",value:""};var L=function(e){function r(e,t){C(this,r);var n=O(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return n.state={current:e.current},n.config=a(e,["onChange","onBlur","dataSource","current","checked"],n.onChange,n.onBlur),n}return S(r,e),T(r,[{key:"getValue",value:function(){return this.state.current}},{key:"onChange",value:function(e){var r=e.target.value;this.setState({current:r}),this.tryUpdateFormModel(r),this.notify("onChange",r)}},{key:"onBlur",value:function(){this.notify("onBlur",this.state.current)}},{key:"render",value:function(){return w(this.config,this.props.dataSource,this.state.current,this.onChange,this.onBlur)}}]),r}(A);L.propTypes={name:r.PropTypes.string.isRequired,dataSource:r.PropTypes.array.isRequired,current:r.PropTypes.oneOfType([r.PropTypes.string,r.PropTypes.number,r.PropTypes.bool])};var G=function(e){function r(e,t){C(this,r);var n=O(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return n.state={current:e.current},n.dataSource=n.props.dataSource,n.config=a(e,["onChange","onBlur","current","value","dataSource"],n.onChange,n.onBlur),n}return S(r,e),T(r,[{key:"getValue",value:function(){return this.state.current}},{key:"onChange",value:function(e){var r=e.target.options[e.target.selectedIndex].value;this.setState({current:r}),this.tryUpdateFormModel(r),this.notify("onChange",r)}},{key:"onBlur",value:function(){this.notify("onBlur",this.state.current)}},{key:"render",value:function(){var e=Object.assign({},this.config,{value:this.state.current});return N(e,this.dataSource,this.onChange)}}]),r}(A);G.propTypes={name:r.PropTypes.string.isRequired,dataSource:r.PropTypes.array.isRequired,current:r.PropTypes.oneOfType([r.PropTypes.string,r.PropTypes.number,r.PropTypes.bool])};var W=function(e){function r(e,t){C(this,r);var n=O(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return n.state={value:e.value},n.config=a(e,["onChange","onBlur","value"],n.onChange,n.onBlur),n}return S(r,e),T(r,[{key:"getValue",value:function(){return this.state.value}},{key:"onChange",value:function(e){var r=e.target.value;this.setState({value:r}),this.tryUpdateFormModel(r),this.notify("onChange",r)}},{key:"onBlur",value:function(){this.notify("onBlur",this.state.value)}},{key:"render",value:function(){var e=Object.assign({},this.config,{value:this.state.value});return R(e)}}]),r}(A);W.propTypes={name:r.PropTypes.string.isRequired,value:r.PropTypes.string},W.defaultProps={value:""};var z=function(e){function r(e,t){C(this,r);var n=O(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return n.state={disabled:e.disabled},e.shouldDisable&&void 0!==t.form&&t.form.onFormStateChange(function(e){var r=e.hasError;n.setState({disabled:r})}),n.config=o(e,["shouldDisable","disabled","type"]),n}return S(r,e),T(r,[{key:"render",value:function(){return q(this.config,this.state.disabled)}}]),r}(r.Component);z.propTypes={shouldDisable:r.PropTypes.bool,disabled:r.PropTypes.bool},z.defaultProps={shouldDisable:!0,disabled:!1},z.contextTypes={form:r.PropTypes.instanceOf(V)},e.required=m,e.minLength=g,e.maxLength=b,e.pattern=k,e.custom=P,e.isRequired=t,e.Checkbox=I,e.CheckboxGroup=U,e.Form=V,e.FormGroup=H,e.Validator=M,e.validateValue=h,e.Input=D,e.RadioGroup=L,e.Select=G,e.TextArea=W,e.Submit=z,Object.defineProperty(e,"__esModule",{value:!0})});