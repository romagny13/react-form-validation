/*!
 * romagny13-react-form-validation v0.3.0
 * (c) 2017 romagny13
 * Released under the MIT License.
 */
!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],r):r(e.ReactFormValidation=e.ReactFormValidation||{},e.React)}(this,function(e,r){"use strict";function t(e){return void 0===e}function n(e){return void 0!==e}function o(e){return"string"==typeof e}function s(e){return"number"==typeof e}function a(e){return"boolean"==typeof e}function i(e){return"function"==typeof e}function p(e,r){e&&r&&r.focus()}function u(e){return Object.keys(e).length}function c(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t={};for(var n in e)e.hasOwnProperty(n)&&-1===r.indexOf(n)&&(t[n]=e[n]);return t}function h(e){return null===e||t(e)||""===e||a(e)&&!1===e}function l(e,r,t){return e.replace(r,t)}function f(e){var r={},t={},n=!1;return e.forEach(function(e){var o=e.validateOnSubmit();if(o){var s=o.name,a=o.hasError,i=o.firstError,p=o.value;r[s]={hasError:a,firstError:i},t[s]=p,a&&(n=!0)}}),{hasError:n,formStates:r,formModel:t}}function d(e){for(var r in e)if(e.hasOwnProperty(r)){var t=e[r];if(t.hasError)return!1}return!0}function m(e,r,t,n,o,s,a){if(e){var i=t&&""!==t?t+" "+n:n;return s&&(i+=" "+a),i}if(r){var p=t&&""!==t?t+" "+o:o;return s&&(p+=" "+a),p}return t}function y(e,r,t){return e.length>0&&(!0===t||r&&r.submitted)}function v(e,r,t){return e.length>0&&!t&&r&&"touched"===r.mode}function g(e){var r=e.tagName;return"INPUT"===r?"checkbox"===e.type?"on"!==e.value?e.value:e.checked:e.value:"TEXTAREA"===r?e.value:"SELECT"===r?e.options[e.selectedIndex].value:void 0}function b(e,r){var t=!1,n={},o="";return r.forEach(function(r){var o=r(e);o&&(t=!0,n[o.name]=o.error)}),t&&(o=C(n)),{hasError:t,firstError:o,errors:n}}function C(e){return e[Object.keys(e)[0]]}function P(e,r,t){var n=e.hasError,o=e.firstError;return r!==n||t!==o}function T(e){return e&&u(e)>0?{hasError:!0,hasSuccess:!1,firstError:C(e),errors:e}:{hasError:!1,hasSuccess:!1,firstError:"",errors:{}}}function E(e,r){if(e&&r)return e.querySelector("[name='"+r+"']")}function k(e){return n(e)?e:""}r="default"in r?r.default:r;var S=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"required",t=o(e)?e:"This field is required.";return function(e){if(h(e))return{name:r,error:t}}},_=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"minLength",n=s(e)?e:3,a=o(r)?r:l("Please enter at least than {0} characters.","{0}",n);return function(e){if(!h(e)&&e.length<n)return{name:t,error:a}}},O=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"maxLength",n=s(e)?e:30,a=o(r)?r:l("Please enter no more than {0} characters.","{0}",n);return function(e){if(!h(e)&&e.length>n)return{name:t,error:a}}},N=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pattern",n=o(r)?r:"Please fix this field.";return function(r){if(!h(r)&&!e.test(r))return{name:t,error:n}}},x=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"custom",n=o(r)?r:"Please fix this field.";return function(r){if(!h(r)&&!e(r))return{name:t,error:n}}},j=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},R=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}(),q=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},w=function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)},F=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r},V=function(e){function t(e){j(this,t);var r=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={checked:e.checked},r.onChange=r.onChange.bind(r),r}return w(t,e),R(t,[{key:"componentDidMount",value:function(){p(this.props.focus,this.refs[this.props.name])}},{key:"onChange",value:function(e){var r=e.target.checked;this.setState({checked:r}),i(this.props.onChange)&&this.props.onChange(this.props.name,r)}},{key:"render",value:function(){return r.createElement("input",{ref:this.props.name,type:"checkbox",id:this.props.id,name:this.props.name,checked:this.state.checked,onChange:this.onChange,className:this.props.className})}}]),t}(r.Component);V.propTypes={id:r.PropTypes.string,name:r.PropTypes.string.isRequired,className:r.PropTypes.string,onChange:r.PropTypes.func,checked:r.PropTypes.bool,focus:r.PropTypes.bool},V.defaultProps={checked:!1};var D=function(e){function t(e){j(this,t);var r=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={currents:e.currents},r.onChange=r.onChange.bind(r),r.indexOf=r.indexOf.bind(r),r}return w(t,e),R(t,[{key:"indexOf",value:function(e){for(var r=this.props.currents,t=0;t<r.length;t++)if(r[t]===e)return t;return-1}},{key:"onChange",value:function(e){var r=e.target.value,t=this.indexOf(r),n=this.state.currents;-1!==t?n.splice(t,1):n.push(r),this.setState({currents:n}),i(this.props.onChange)&&this.props.onChange(this.props.name,n)}},{key:"render",value:function(){var e=this;return r.createElement("div",null,this.props.dataSource.map(function(t,n){return r.createElement("div",{key:n},r.createElement("input",{type:"checkbox",name:e.props.name,checked:-1!==e.indexOf(t),value:t,onChange:e.onChange,className:e.props.className}),t)}))}}]),t}(r.Component);D.propTypes={name:r.PropTypes.string.isRequired,className:r.PropTypes.string,onChange:r.PropTypes.func,dataSource:r.PropTypes.array.isRequired,currents:r.PropTypes.array},D.defaultProps={currents:[]};var H=function(e){function t(e){j(this,t);var r=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._subscribers=[],r._validators=[],r.hasError=!1,r.formStates={},r.submitted=!1,r.onSubmit=r.onSubmit.bind(r),r}return w(t,e),R(t,[{key:"getChildContext",value:function(){return{form:this}}},{key:"register",value:function(e){var r=this;e.onValidationStateChange(function(e){var t=e.name,n=e.hasError,o=e.firstError;r.formStates[t]={hasError:n,firstError:o},r.hasError=!d(r.formStates),r.raiseHasErrorChange(n)}),this._validators.push(e)}},{key:"onFormErrorStateChange",value:function(e){this._subscribers.push(e)}},{key:"raiseHasErrorChange",value:function(e){this._subscribers.forEach(function(r){r(e)})}},{key:"onSubmit",value:function(e){e.preventDefault();var r=f(this._validators),t=r.hasError,n=r.formStates,o=r.formModel;this.hasError=t,this.formStates=n,this.submitted=!0,this.props.onSubmit({hasError:t,formStates:n,formModel:o}),this.raiseHasErrorChange(t)}},{key:"render",value:function(){var e=c(this.props,["onSubmit","mode"]);return r.createElement("form",q({onSubmit:this.onSubmit},e),this.props.children)}},{key:"mode",get:function(){return this.props.mode}}]),t}(r.Component);H.propTypes={mode:r.PropTypes.oneOf(["submit","touched"]),onSubmit:r.PropTypes.func.isRequired,children:r.PropTypes.node},H.defaultProps={mode:"submit"},H.childContextTypes={form:r.PropTypes.any};var M=function(e){var t=e.id,n=e.hasErrorClassName,o=e.hasSuccessClassName,s=e.showHasFeedback,a=e.showHasSuccess,i=e.hasFeedbackClassName,p=e.hasErrorFeedbackClassName,u=e.hasSuccessFeedbackClassName,c=e.className,h=e.children,l=e.hasError,f=e.hasSuccess,d=e.firstError,y=f&&a,v=m(l,y,c,n,o,s,i);return r.createElement("div",{className:v,id:t},h,s&&l&&r.createElement("span",{className:p,"aria-hidden":"true"}),s&&a&&f&&r.createElement("span",{className:u,"aria-hidden":"true"}),l?r.createElement("span",{className:"help-block"},d):null)};M.propTypes={id:r.PropTypes.string,children:r.PropTypes.node,className:r.PropTypes.string,hasErrorClassName:r.PropTypes.string,hasSuccessClassName:r.PropTypes.string,showHasFeedback:r.PropTypes.bool,showHasSuccess:r.PropTypes.bool,hasFeedbackClassName:r.PropTypes.string,hasErrorFeedbackClassName:r.PropTypes.string,hasSuccessFeedbackClassName:r.PropTypes.string},M.defaultProps={className:"form-group",hasErrorClassName:"has-error",hasSuccessClassName:"has-success",showHasFeedback:!0,showHasSuccess:!0,hasFeedbackClassName:"has-feedback",hasErrorFeedbackClassName:"glyphicon glyphicon-remove form-control-feedback",hasSuccessFeedbackClassName:"glyphicon glyphicon-ok form-control-feedback"};var L=function(e){function t(e,r){j(this,t);var o=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return o._subscribers=[],o.state=T(o.props.errors),o.name=e.name,i(o.props.onValidationStateChange)&&o.onValidationStateChange(o.props.onValidationStateChange),n(o.context.form)&&o.context.form.register(o),o}return w(t,e),R(t,[{key:"componentWillReceiveProps",value:function(e){if(e.errors){var r=e.errors,t=u(r)>0,n=!t,o=t?C(r):"";if(this.setState({hasError:t,hasSuccess:n,firstError:o,errors:r}),this.formElement){var s=this.formElement.getName(),a=this.formElement.getValue();this.raise({name:s,value:a,hasError:t,hasSuccess:n,firstError:o,errors:r})}}}},{key:"onValidationStateChange",value:function(e){this._subscribers.push(e)}},{key:"raiseValidationStateChange",value:function(e){this._subscribers.forEach(function(r){r(e)})}},{key:"validateOnSubmit",value:function(){var e=this.name,r=E(this.refs.root,e);if(r){var t=g(r),n=b(t,this.props.validators),o=n.hasError,s=n.firstError,a=n.errors;return this.setState({hasError:o,hasSuccess:!o,firstError:s,errors:a}),this.submitted=!0,{name:e,value:t,hasError:o,firstError:s,errors:a}}}},{key:"validateOnChange",value:function(e){if(e.target.name===this.name){var r=e.target.name,t=g(e.target),n=b(t,this.props.validators),o=n.hasError,s=n.firstError,a=n.errors;if(P(this.state,o,s)){var i=!o;this.setState({hasError:o,hasSuccess:i,firstError:s,errors:a}),this.touched||(this.touched=!0),this.raiseValidationStateChange({name:r,value:t,hasError:o,hasSuccess:i,firstError:s,errors:a})}}}},{key:"render",value:function(){var e=this,t={onBlur:function(r){v(e.props.validators,e.context.form,e.touched)&&e.validateOnChange(r)},onChange:function(r){y(e.props.validators,e.context.form,e.touched)&&e.validateOnChange(r)}};if("function"==typeof this.props.children.type){var n=Object.assign({},this.state,this.props.children.props),o=new this.props.children.type(n),s=Object.assign({},o.props,t);return r.createElement(o.type,q({ref:"root"},s),o.props.children)}var a=this.props.children;return r.createElement("root",q({ref:"root"},t),a.props.children)}}]),t}(r.Component);L.contextTypes={form:r.PropTypes.any},L.propTypes={name:r.PropTypes.string.isRequired,validators:r.PropTypes.array.isRequired,onValidationStateChange:r.PropTypes.func,errors:r.PropTypes.object},L.defaultProps={validators:[]};var I=function(e){function t(e){j(this,t);var r=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=k(e.value);return r.state={value:n},r.onChange=r.onChange.bind(r),r}return w(t,e),R(t,[{key:"componentDidMount",value:function(){p(this.props.focus,this.refs[this.props.name])}},{key:"onChange",value:function(e){var r=e.target.value;this.setState({value:r}),i(this.props.onChange)&&this.props.onChange(this.props.name,r)}},{key:"render",value:function(){return r.createElement("input",{ref:this.props.name,type:this.props.type,id:this.props.id,name:this.props.name,value:this.state.value,onChange:this.onChange,className:this.props.className,placeholder:this.props.placeholder})}}]),t}(r.Component);I.propTypes={focus:r.PropTypes.bool,value:r.PropTypes.oneOfType([r.PropTypes.string,r.PropTypes.number,r.PropTypes.bool]),name:r.PropTypes.string.isRequired,id:r.PropTypes.string,className:r.PropTypes.string,onChange:r.PropTypes.func,type:r.PropTypes.string,placeholder:r.PropTypes.string},I.defaultProps={type:"text"};var A=function(e){function t(e){j(this,t);var r=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={current:e.current},r.onChange=r.onChange.bind(r),r}return w(t,e),R(t,[{key:"onChange",value:function(e){var r=e.target.value;this.setState({current:r}),i(this.props.onChange)&&this.props.onChange(this.props.name,r)}},{key:"render",value:function(){var e=this;return r.createElement("div",null,this.props.dataSource.map(function(t,n){return r.createElement("div",{key:n},r.createElement("input",{type:"radio",name:e.props.name,checked:e.state.current===t,value:t,onChange:e.onChange,className:e.props.className}),t)}))}}]),t}(r.Component);A.propTypes={name:r.PropTypes.string.isRequired,className:r.PropTypes.string,onChange:r.PropTypes.func,dataSource:r.PropTypes.array.isRequired,current:r.PropTypes.oneOfType([r.PropTypes.string,r.PropTypes.number,r.PropTypes.bool])};var G=function(e){function t(e){j(this,t);var r=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={current:e.current},r.onChange=r.onChange.bind(r),r}return w(t,e),R(t,[{key:"componentDidMount",value:function(){p(this.props.focus,this.refs[this.props.name])}},{key:"onChange",value:function(e){var r=e.target.options[e.target.selectedIndex].value;this.setState({current:r}),i(this.props.onChange)&&this.props.onChange(this.props.name,r)}},{key:"render",value:function(){var e=this;return r.createElement("select",{ref:this.props.name,id:this.props.id,name:this.props.name,value:this.state.current,onChange:this.onChange,className:this.props.className},this.props.dataSource.map(function(t,n){return r.createElement("option",{key:n,value:t,onChange:e.onChange},t)}))}}]),t}(r.Component);G.propTypes={id:r.PropTypes.string,name:r.PropTypes.string.isRequired,className:r.PropTypes.string,onChange:r.PropTypes.func,dataSource:r.PropTypes.array.isRequired,current:r.PropTypes.oneOfType([r.PropTypes.string,r.PropTypes.number,r.PropTypes.bool]),focus:r.PropTypes.bool};var B=function(e){function t(e){j(this,t);var r=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={value:e.value},r.onChange=r.onChange.bind(r),r}return w(t,e),R(t,[{key:"componentDidMount",value:function(){p(this.props.focus,this.refs[this.props.name])}},{key:"getName",value:function(){return this.props.name}},{key:"getValue",value:function(){return this.state.value}},{key:"onChange",value:function(e){var r=e.target.value;this.setState({value:r}),i(this.props.onChange)&&this.props.onChange(this.props.name,r)}},{key:"render",value:function(){var e=c(this.props,["value","onChange","focus"]);return r.createElement("textarea",q({ref:this.props.name,value:this.state.value,onChange:this.onChange},e))}}]),t}(r.Component);B.propTypes={name:r.PropTypes.string.isRequired,onChange:r.PropTypes.func,value:r.PropTypes.string,focus:r.PropTypes.bool},B.defaultProps={value:""};var U=function(e){function t(e,r){j(this,t);var o=F(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return o.state={disabled:!1},o.props.shouldDisable&&n(o.context.form)&&o.context.form.onFormErrorStateChange(function(e){o.setState({disabled:e})}),o}return w(t,e),R(t,[{key:"render",value:function(){var e=c(this.props,["shouldDisable","disabled","type"]);return r.createElement("input",q({type:"submit",disabled:this.state.disabled},e))}}]),t}(r.Component);U.propTypes={shouldDisable:r.PropTypes.bool},U.defaultProps={shouldDisable:!0},U.contextTypes={form:r.PropTypes.any},e.required=S,e.minLength=_,e.maxLength=O,e.pattern=N,e.custom=x,e.isRequired=h,e.Checkbox=V,e.CheckboxGroup=D,e.Form=H,e.FormGroup=M,e.Validator=L,e.validateValue=b,e.Input=I,e.RadioGroup=A,e.Select=G,e.TextArea=B,e.Submit=U,Object.defineProperty(e,"__esModule",{value:!0})});