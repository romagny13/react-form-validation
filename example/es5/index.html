<!DOCTYPE html>
<html>

<head>
    <title>React Form Validation</title>
    <script src="https://unpkg.com/react@15/dist/react.min.js"></script>
    <script src="https://unpkg.com/react-dom@15/dist/react-dom.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.34/browser.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.css">
    <style>

    </style>
</head>

<body>
    <div id="app"></div>
    <script src="../../dist/react-form-validation.js"></script>
    <script type="text/babel">   
        var Form = ReactFormValidation.Form;
        var Validator = ReactFormValidation.Validator;
        var Input = ReactFormValidation.Input;
        var required = ReactFormValidation.required;
        var minLength = ReactFormValidation.minLength;

        var MyFormGroup = function (props) {
            var groupClassName = props.hasError ? 'form-group has-error' : 'form-group';
            return (
                <div className={groupClassName}>
                    {props.children}
                    {props.hasError && <span className="help-block">{props.error}</span>}
                </div>
            );
        };

        var Home = React.createClass({
            getInitialState: function () {
                return {
                    model: {
                        firstname: 'Marie'
                    }
                };
            },
            onSubmit: function (result) {
                console.log(result)
                if (!result.hasError) {
                    var user = {
                        firstname: result.model['firstname']
                    };
                    console.log('save user', user);
                }
            },
            render() {
                return (
                    <Form onSubmit={this.onSubmit} mode="touched" model={this.state.model}>
                        <Validator validators={[required(), minLength(3)]}>
                            <MyFormGroup>
                                <label htmlFor="firstname">Firstname:</label>
                                <Input id="firstname" name="firstname" value={this.state.model.firstname} className="form-control" focus />
                            </MyFormGroup>
                        </Validator>
                        <input className="btn btn-default" type="submit" value="Submit" />
                    </Form>
                );
            }
        });

        ReactDOM.render(<div className="container"><h2>Form validation with es5</h2><Home /></div>, document.getElementById('app'));
    </script>
</body>

</html>